{% extends 'base.html' %}

{% block content %}
<div class="row">
    <div class="col-lg-8">
        {% for post in posts.items %}
        <div class="card mb-4">
            {% if post.thumbnail_url %}
            <a href="#!"><img class="card-img-top" src="{{ post.thumbnail_url }}" alt="..." /></a>
            {% else %}
            <a href="#!"><img class="card-img-top" src="https://dummyimage.com/700x350/dee2e6/6c757d.jpg" alt="..." /></a>
            {% endif %}
            <div class="card-body">
                <div class="small text-muted">{{ post.get_created() }}</div>
                {% if post.tag %}
                        <a class="badge bg-secondary text-decoration-none link-light" href="{{ url_for('category_view', category=post.tag) }}">{{ post.tag }}</a>
                {% endif %}
                <h2 class="card-title h4">{{ post.title }}</h2>
                <p>{{ post.content_preview | safe}}</p>
                    <a class="btn btn-primary" href="{{ url_for('postview', post_id=post.id) }}">Read more →</a>
            </div>
        </div>
    </div>
    <!-- Side widgets-->
    <div class="col-lg-4">
        <!-- Search widget-->
        <div class="card mb-4">
            <div class="card-header">Search</div>
            <div class="card-body">
                <div class="input-group">
                    <input class="form-control" type="text" placeholder="Enter search term..." aria-label="Enter search term..." aria-describedby="button-search" />
                    <button class="btn btn-primary" id="button-search" type="button">Go!</button>
                </div>
            </div>
        </div>

        <!-- Side widget-->
        <div class="card mb-4">
            <div class="card-header">Side Widget</div>
            <div class="card-body">Empty widget space (will be update later)</div>
        </div>
    </div>
    <hr>
    {% endfor %}
</div>
<!-- Pagination-->
<hr class="my-0" />
<ul class="pagination justify-content-center my-4">
    {% if posts.has_prev %}
    <li class="page-item">
        <a class="page-link" href="?page={{ posts.prev_num }}">이전</a>
    </li>
    {% else %}
    <li class="page-item disabled">
        <a class="page-link" tabindex="-1"aria-disabled="true"href="javascript:void(0)">이전</a>
    </li>
    {% endif %}
    {% for page_num in posts.iter_pages() %}
    {% if page_num %}
    {% if page_num != posts.page %}
    <li class="page-item">
        <a class="page-link"href="?page={{ page_num }}">{{ page_num }}</a>
    </li>
    {% else %}
    <li class="page-item active" aria-current="page">
        <a class="page-link"href="javascript:void(0)">{{ page_num }}</a>
    </li>
    {% endif %}
    {% else %}
    <li class="disabled">
        <a class="page-link"href="javascript:void(0)">...</a>
    </li>
    {% endif %}
    {% endfor %}

    {% if posts.has_next %}
    <li class="page-item">
        <a class="page-link"href="?page={{ posts.next_num }}">다음</a>
    </li>
    {% else %}
    <li class="page-item disabled">
        <a class="page-link"tabindex="-1"aria-disabled="true"href="javascript:void(0)">다음</a>
    </li>
    {% endif %}
</ul>

{% endblock %}
